<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Term Deposit Predictor</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 24px; background: #f6f7fb; }
    .card { max-width: 860px; margin: 0 auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,.06); }
    h1 { margin: 0 0 8px; }
    p { margin: 0 0 16px; color: #475569; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    label { font-weight: 600; display: block; margin-bottom: 6px; }
    input, select { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px; }
    button { margin-top: 16px; padding: 12px 16px; border: 0; border-radius: 10px; background: #2563eb; color: white; font-weight: 700; cursor: pointer; }
    button:disabled { background: #94a3b8; cursor: not-allowed; }
    .result { margin-top: 18px; padding: 14px; border-radius: 10px; background: #f1f5f9; border: 1px solid #e2e8f0; }
    .error { color: #dc2626; font-weight: 700; margin-top: 12px; }
    pre { margin: 10px 0 0; white-space: pre-wrap; }
    @media (max-width: 720px){ .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="card">
    <h1>Term Deposit Predictor</h1>
    <p>Enter client details and click <b>Predict</b>.</p>

    <form id="predictForm">
      <div class="grid">
        <div><label>Age</label><input type="number" name="Age" min="18" max="120" required /></div>

        <div>
          <label>Job</label>
          <select name="Job" required>
            <option value="">Select…</option>
            <option>admin.</option><option>blue-collar</option><option>entrepreneur</option>
            <option>housemaid</option><option>management</option><option>retired</option>
            <option>self-employed</option><option>services</option><option>student</option>
            <option>technician</option><option>unemployed</option><option>unknown</option>
          </select>
        </div>

        <div>
          <label>Marital Status</label>
          <select name="MaritalStatus" required>
            <option value="">Select…</option>
            <option>single</option><option>married</option><option>divorced</option><option>unknown</option>
          </select>
        </div>

        <div>
          <label>Education</label>
          <select name="Education" required>
            <option value="">Select…</option>
            <option>primary</option><option>secondary</option><option>tertiary</option><option>unknown</option>
          </select>
        </div>

        <div>
          <label>Default</label>
          <select name="Default" required>
            <option value="">Select…</option>
            <option>yes</option><option>no</option><option>unknown</option>
          </select>
        </div>

        <div><label>Balance</label><input type="number" step="0.01" name="Balance" required /></div>

        <div>
          <label>Housing</label>
          <select name="Housing" required>
            <option value="">Select…</option>
            <option>yes</option><option>no</option><option>unknown</option>
          </select>
        </div>

        <div>
          <label>Loan</label>
          <select name="Loan" required>
            <option value="">Select…</option>
            <option>yes</option><option>no</option><option>unknown</option>
          </select>
        </div>

        <div>
          <label>Contact</label>
          <select name="Contact" required>
            <option value="">Select…</option>
            <option>cellular</option><option>telephone</option><option>unknown</option>
          </select>
        </div>

        <div><label>Day</label><input type="number" name="Day" min="1" max="31" required /></div>
      </div>

      <button id="btn" type="submit">Predict</button>
      <div id="err" class="error"></div>
    </form>

    <div id="out" class="result" hidden></div>
  </div>

  <script>
    const form = document.getElementById("predictForm");
    const out = document.getElementById("out");
    const err = document.getElementById("err");
    const btn = document.getElementById("btn");

    function buildPayload(formEl) {
      const data = Object.fromEntries(new FormData(formEl).entries());
      data.Age = Number(data.Age);
      data.Balance = Number(data.Balance);
      data.Day = Number(data.Day);
      return data;
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      err.textContent = "";
      out.hidden = true;
      btn.disabled = true;
      btn.textContent = "Predicting...";

      try {
        const payload = buildPayload(form);

        const res = await fetch("/predict", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        if (!res.ok) throw new Error(`API Error ${res.status}: ${await res.text()}`);

        const json = await res.json();
        out.hidden = false;
        out.innerHTML = `<div><b>Response:</b></div><pre>${JSON.stringify(json, null, 2)}</pre>`;
      } catch (ex) {
        err.textContent = ex.message || "Something went wrong.";
      } finally {
        btn.disabled = false;
        btn.textContent = "Predict";
      }
    });
  </script>
</body>
</html>
